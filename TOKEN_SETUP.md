# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è AquaWiki API

## üìã –û–±–∑–æ—Ä

AquaWiki API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–ª–æ–≥–∞, –≥–¥–µ —Ç–æ–ª—å–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç, –∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å.

## üéØ –¢–∏–ø—ã —Ç–æ–∫–µ–Ω–æ–≤

### 1. **ADMIN_TOKEN** - –ê–¥–º–∏–Ω—Å–∫–∏–π —Ç–æ–∫–µ–Ω
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- **–ü—Ä–∞–≤–∞**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ü–∏—è–º

### 2. **READ_TOKEN** - –¢–æ–∫–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–ª—è –≤–∞—à–µ–≥–æ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ü—Ä–∞–≤–∞**: –¢–æ–ª—å–∫–æ GET –∑–∞–ø—Ä–æ—Å—ã

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã
curl -X POST http://localhost:3000/tokens/generate
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –¢–æ–∫–µ–Ω—ã –¥–ª—è API
ADMIN_TOKEN=–≤–∞—à_–∞–¥–º–∏–Ω—Å–∫–∏–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
READ_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_—á—Ç–µ–Ω–∏—è_–∑–¥–µ—Å—å

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=–≤–∞—à–∞_—Å—Ç—Ä–æ–∫–∞_–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è_–∫_–±–¥
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
npm run dev
```

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

### –î–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã)

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl -X POST "http://localhost:3000/categories/category" \
  -H "Authorization: Bearer –≤–∞—à_–∞–¥–º–∏–Ω—Å–∫–∏–π_—Ç–æ–∫–µ–Ω" \
  -H "Content-Type: application/json" \
  -d '{
    "translations": {
      "az": {"title": "Balƒ±q", "description": "Balƒ±q haqqƒ±nda"},
      "ru": {"title": "–†—ã–±–∞", "description": "–û —Ä—ã–±–µ"},
      "en": {"title": "Fish", "description": "About fish"}
    }
  }'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
curl -X PATCH "http://localhost:3000/articles/article" \
  -H "Authorization: Bearer –≤–∞—à_–∞–¥–º–∏–Ω—Å–∫–∏–π_—Ç–æ–∫–µ–Ω" \
  -H "Content-Type: application/json" \
  -d '{
    "id": "article_id",
    "translations": {
      "ru": {"title": "–ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫", "description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"}
    }
  }'

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl -X DELETE "http://localhost:3000/subcategories/subcategory/subcategory_id" \
  -H "Authorization: Bearer –≤–∞—à_–∞–¥–º–∏–Ω—Å–∫–∏–π_—Ç–æ–∫–µ–Ω"
```

### –î–ª—è —á—Ç–µ–Ω–∏—è (–≤–∞—à–µ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π
curl "http://localhost:3000/articles?locale=ru" \
  -H "Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_—á—Ç–µ–Ω–∏—è"

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞—Ç—å–∏
curl "http://localhost:3000/articles/article/article_id?locale=ru" \
  -H "Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_—á—Ç–µ–Ω–∏—è"
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Next.js

### –í –≤–∞—à–µ–º Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

```typescript
// lib/api.ts
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000'
const READ_TOKEN = process.env.API_READ_TOKEN

export async function fetchArticles(locale = 'ru') {
  const response = await fetch(`${API_BASE_URL}/articles?locale=${locale}`, {
    headers: {
      'Authorization': `Bearer ${READ_TOKEN}`,
      'Content-Type': 'application/json'
    }
  })
  
  if (!response.ok) {
    throw new Error('Failed to fetch articles')
  }
  
  return response.json()
}

export async function fetchArticle(id: string, locale = 'ru') {
  const response = await fetch(`${API_BASE_URL}/articles/article/${id}?locale=${locale}`, {
    headers: {
      'Authorization': `Bearer ${READ_TOKEN}`,
      'Content-Type': 'application/json'
    }
  })
  
  if (!response.ok) {
    throw new Error('Failed to fetch article')
  }
  
  return response.json()
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Next.js (.env.local):

```env
NEXT_PUBLIC_API_URL=http://localhost:3000
API_READ_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_—á—Ç–µ–Ω–∏—è
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ Git
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª—ã (–¥–æ–±–∞–≤—å—Ç–µ –≤ `.gitignore`)

2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã**
   ```bash
   # –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –∫–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤
   curl -X POST http://localhost:3000/tokens/generate
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
   - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è API –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
   - –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω—Å–∫–æ–º—É —Ç–æ–∫–µ–Ω—É**
   - –ê–¥–º–∏–Ω—Å–∫–∏–π —Ç–æ–∫–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —É –≤–∞—Å
   - –¢–æ–∫–µ–Ω —á—Ç–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç
curl "http://localhost:3000/articles" \
  -H "Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_—á—Ç–µ–Ω–∏—è"

# –ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ 401/403, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
# 1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
# 2. –§–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ Authorization
# 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –í—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –æ—à–∏–±–∫–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `http://localhost:3000/docs`
- **OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è**: `http://localhost:3000/api-docs`
- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: `API_DOCUMENTATION.md`

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–æ–∫–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é 